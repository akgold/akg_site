---
title: 'Upgrading to R #4: It Takes a Team to Write a Package'
author: Alex Gold
date: '2019-02-27'
slug: upgrading-to-r-4-write-a-package
categories: 
  - conferences
  - R
tags: []
---



<p>As you’re upgrading to R, you’ll be writing a lot of code. As the ever-quotable <a href="https://twitter.com/drob/">David Robinson</a> says</p>
{{% tweet "928447584712253440" %}}
<p>What he said! And then if you find yourself writing the same function three times, write a package!</p>
<p>I know I’m not exactly breaking new territory to say that writing <a href="https://medium.com/airbnb-engineering/using-r-packages-and-education-to-scale-data-science-at-airbnb-906faa58e12d">an R package</a> <a href="https://blog.craftlab.hu/from-0-to-5-our-journey-of-building-an-r-package-ecosystem-ec257818e425">with your team</a> <a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">is great</a>, and there are really great resources for <em>how</em> to write a package.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> I’ll just add that mastering R packages will make you feel like a wizard, and that is always cool.</p>
<div class="figure">
<img src="/post/2019-02-27-upgrading-to-r-4-write-a-package_files/wizard.gif" alt="Master of R packages." />
<p class="caption">Master of R packages.</p>
</div>
<p>Obviously other people have covered the why and how in exhausting detail. What I’d like to talk about in the context of <a href="/2019/01/19/upgrading-to-r-at-rstudio-conf-2019/">upgrading to R</a> is how to make sure your R packages <em>actually get used</em>, which is mostly about the <strong>what</strong>’s in the package, and <strong>who</strong> built it.</p>
<p><img src="/post/2019-02-27-upgrading-to-r-4-write-a-package_files/figure-html/pkg-1.gif" /><!-- --></p>
<div id="what-belongs-in-your-teams-r-package" class="section level1">
<h1>What Belongs in Your Team’s R Package</h1>
<p>As in the <code>gif</code> above, your R package can have lots of useful things in it, but here are things that I’ve frequently used in packages on my team:</p>
<div id="dplyr-function-wrappers" class="section level3">
<h3><code>dplyr</code> function wrappers</h3>
<p>In my opinion, this is probably the most useful, especially if your team has a lot of junior members. Many times students aren’t exposed to the weirdness of real data, and so providing some automated checks can be super helpful. Some functions we’ve created wrappers with diagnostics:</p>
<ul>
<li><code>recode2</code>, which wraps <code>dplyr::recode</code> with a cross-table of the values before and after recoding</li>
<li><code>join2</code>, which wraps <code>dplyrs</code> join functions providing diganostics on how many rows did or didn’t join and whether there’s duplicated IDs</li>
<li><code>read_in</code>, which wraps <code>readr::read_delim</code> and prints the first few rows upon import -<code>filter2</code>, which wraps <code>dplyr::filter</code> and lets you know how many rows got dropped</li>
</ul>
</div>
<div id="reference-data-sets" class="section level3">
<h3>Reference data sets</h3>
</div>
<div id="plotting-functions" class="section level3">
<h3>Plotting Functions</h3>
</div>
<div id="openxlsx-wrappers-with-formatting" class="section level2">
<h2>Openxlsx wrappers with formatting</h2>
<div id="special-analytical-functions" class="section level3">
<h3>Special analytical functions</h3>
</div>
<div id="report-templates" class="section level3">
<h3>Report Templates</h3>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>My favorite is Hadley Wickham’s <em><a href="http://r-pkgs.had.co.nz/">R Packages</a></em>.<a href="#fnref1">↩</a></p></li>
</ol>
</div>
