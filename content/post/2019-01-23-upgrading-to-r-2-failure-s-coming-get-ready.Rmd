---
title: 'Upgrading to R #2: Failureâ€™s Coming, Get Ready!'
author: Alex K Gold
date: '2019-01-23'
slug: upgrading-to-r-2-failure-s-coming-get-ready
categories:
  - conferences
  - R
tags: []
---
```{r setup, include=FALSE}
library(tidyverse)
library(gganimate)
source(here::here("content", "post", "rsconf2019", "helper_funcs.R"))
options(gganimate.start_pause = 15)
```

This is definitely the most personal, and the most painful of my upgrading to R lessons. But first, here's a basic outline of something that many first-time managers go through. I can **guarantee** something like this will happen if you're managing a team upgrading to R.

```{r fail, messge = FALSE, warning =FALSE}
options(gganimate.nframes = 400,
        gganimate.fps = 6,
        gganimate.end_pause = 10)
morale <- c(2, 3, 4.5, 3, 3, 2.6, 2.0, 0.5, 1.3, 2, 3.5, 4.0)
prod <- c(1, 2.5, 4, 3.5, 4, 3.5, 1.5, 0.5, 0.7, 1.2, 2.5, 3.5)
n <- 7

labs <- c("First day, discovered team works exclusively in Excel.",
          "Began first R project: Codename Tidy",
          "Codename Tidy development completed and delivered!",
          "Revelation: Codename Tidy never really code reviewed.",
          "Work continues apace on other projects.",
          "Discovered: Mistake in Codename Tidy. Poop.",
          "Decision: Team leader will totally rewrite code himself.",
          "Decree from Team Leader: Merge requests every single day.",
          "Observation: No merge requests this week. Mutiny underway?",
          "Realization: Team leader may have overreacted.",
          "Team Meeting: Design code review strategy with team.",
          "Observation: Team members bought in.")

days <- c(0, 1, 23, 24, 25, 26, 26.5, 28, 29, 30, 31, 70)

g <- tibble(person = rep(seq(n), each = length(morale)),
       time = rep(seq(length(morale)), n),
       morale = morale + runif(n * length(morale)),
       prod = prod + runif(n * length(prod)),
       lab = rep(labs, n)) %>%
  mutate(lab = factor(lab, levels = labs, ordered = TRUE)) %>%
  ggplot() +
  geom_point(aes(y = morale, x = prod, color = factor(person)),
             size = 5,
             alpha = 0.8) +
  geom_line(aes(x = prod, y = morale, group = person),
            color = "lightgrey",
            alpha = 0.3) +
  ggtitle("Team's Log, Day {days[frame_along]} - {labs[frame_along]}") +
  theme_rs() +
  ylab("Individual Morale") +
  xlab("Individual Productivity") +
  guides(color = FALSE) +
  theme(axis.text = element_blank(),
        axis.ticks = element_blank()) +
  ggthemes::scale_color_solarized() +
  transition_reveal(time) +
  enter_fade() +
  exit_shrink() +
  ease_aes('sine-in-out') +
  labs(caption = "Completely fake data.")
animate(g, width = 450, height = 450)
```

In case you didn't feel like sitting through that animation, here's the bottom line: my team was doing great work upgrading to R, a mistake made it to a client, I **WAY** overreacted and burned a lot of goodwill that took a long time to get back.

Here's a checklist to figure out if you're in a similar situation
 [] - You're upgrading your team to a new technology (R). 
 [] - You have to keep doing real work while that transition happens. 
 
 That's it. If you're in that situation, mistakes are very likely to happen and likely to make it to someone who shouldn't receive mistakes. You've got to prepare yourself and your team.

# Prepare Technically

This is the obvious kind of preparation. Make sure that you're doing everything you can to avoid mistakes.

### Sanity Checks
Have workers turn their brains on

### Share More Context
Always worth it

### Code Review
Code review is great -- but if you're creating insight products, this is more-or-less your last resort. And even then, I think the primary purpose of code review is to trigger thinking by the person who wrote the code, not for them to be handed insight from on hgiht.
Institute good code review practices as soon as you can. And remember, code review **doesn't have to be on github**.[^1] Code review, no matter how low-tech is 1,000*x* better than code review that doesn't happen because you want to see pretty green and red lines in git.[^2]

This is actually harder than it sounds. Most of the tools we use were created for software engineers. Their main product is code. That is not true for most data science teams.

Some produce scores, most produce insights, but there's no forcing mechanism the way there is for software deployment.

If you're doing data science to create insights (as opposed to creating a score that will be used in some other contect), as most early-maturity data science teams are, there's a huge difference between you and a software engineering team. 




# Prepare Emotionally
More important
Don't overreact
Blameless postmortems
Radical Candor
Rising Strong


[^1]: You *should* also be adopting git, as will be in point 5...but don't WAIT for git to do code review.
[^2]: In the spirit of literate programming, my favorite way to do code review for more than a few lines at a time is actually to print out the code and mark it up like an essay.
